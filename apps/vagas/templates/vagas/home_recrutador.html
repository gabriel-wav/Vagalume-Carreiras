{% extends 'base.html' %}
{% load static %}
{% block title %}Painel da Empresa{% endblock %}

{% block content %}

<style>
    .recrutador-wrapper { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
    
    /* Header com botões de ação */
    .dashboard-header {
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 40px; flex-wrap: wrap; gap: 20px;
        background: #161B22; padding: 30px; border-radius: 16px; border: 1px solid #30363d;
    }
    .header-info h1 { color: #fff; font-size: 2rem; margin-bottom: 5px; }
    .header-info p { color: #8b949e; }

    .header-actions { display: flex; gap: 10px; flex-wrap: wrap; }
    
    .btn-action {
        display: inline-flex; align-items: center; gap: 8px;
        padding: 12px 20px; border-radius: 8px; text-decoration: none; font-weight: 700; transition: all 0.2s;
    }
    .btn-primary { background: #AFEB83; color: #0D1B2A; border: none; }
    .btn-primary:hover { background: #BEF264; transform: translateY(-2px); }
    
    .btn-secondary { background: transparent; border: 1px solid #30363d; color: #c9d1d9; }
    .btn-secondary:hover { border-color: #BEF264; color: #BEF264; }

    /* Grid de Vagas */
    .vagas-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
    
    .vaga-card {
        background: #0D1117; border: 1px solid #30363d; border-radius: 12px; padding: 25px;
        transition: all 0.2s; position: relative;
    }
    .vaga-card:hover { border-color: #BEF264; transform: translateY(-3px); }
    
    .vaga-status {
        position: absolute; top: 20px; right: 20px;
        padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: bold;
    }
    .status-aberta { background: rgba(63, 185, 80, 0.15); color: #3fb950; border: 1px solid #3fb950; }
    .status-fechada { background: rgba(248, 81, 73, 0.15); color: #f85149; border: 1px solid #f85149; }

    .vaga-title { color: #fff; font-size: 1.3rem; margin-bottom: 5px; }
    .vaga-meta { color: #8b949e; font-size: 0.9rem; margin-bottom: 20px; }
    
    .vaga-actions {
        display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; border-top: 1px solid #30363d; padding-top: 15px;
    }
    .btn-small {
        text-align: center; padding: 8px; border-radius: 6px; text-decoration: none; font-size: 0.9rem; font-weight: 600;
    }
    .btn-view { background: #21262d; color: #c9d1d9; grid-column: 1 / -1; } /* Botão Ver Candidatos ocupa tudo */
    .btn-view:hover { background: #30363d; color: #fff; }
    .btn-edit { color: #58a6ff; } .btn-edit:hover { text-decoration: underline; }
    .btn-delete { color: #f85149; } .btn-delete:hover { text-decoration: underline; }

    .empty-state {
        text-align: center; padding: 60px; color: #8b949e; grid-column: 1 / -1;
        background: #161B22; border-radius: 12px; border: 1px dashed #30363d;
    }
</style>

<div class="recrutador-wrapper">
    
    <div class="dashboard-header">
        <div class="header-info">
            <h1>Olá, {{ user.first_name|default:'Recrutador' }}</h1>
            <p>Gerencie suas vagas e encontre talentos.</p>
        </div>
        <div class="header-actions">
            <a href="{% url 'ver_empresa' user.recrutador.empresa.id %}" class="btn-action btn-secondary">
                <i class="fas fa-eye"></i> Ver Minha Página
            </a>
            <a href="{% url 'explorar_vagas' %}" class="btn-action btn-secondary">
                <i class="fas fa-globe"></i> Explorar
            </a>
            <a href="{% url 'radar_de_talentos' %}" class="btn-action btn-secondary">
                <i class="fa-solid fa-satellite-dish"></i> Radar
            </a>
            <a href="{% url 'criar_vaga' %}" class="btn-action btn-primary">
                <i class="fas fa-plus"></i> Criar Nova Vaga
            </a>
        </div>
    </div>

    <h3 style="color: #fff; margin-bottom: 15px; border-left: 4px solid #BEF264; padding-left: 15px;">Minhas Vagas</h3>

    <div class="vagas-grid">
        {% for vaga in vagas %}
            <div class="vaga-card">
                <span class="vaga-status {% if vaga.status %}status-aberta{% else %}status-fechada{% endif %}">
                    {% if vaga.status %}ABERTA{% else %}FECHADA{% endif %}
                </span>
                
                <h3 class="vaga-title">{{ vaga.titulo }}</h3>
                <p class="vaga-meta">
                    <i class="fas fa-map-marker-alt"></i> {{ vaga.localidade }} • {{ vaga.tipo_contrato }}
                </p>

                <div class="vaga-actions">
                    <a href="{% url 'ver_candidatos_vaga' vaga.id %}" class="btn-small btn-view">
                        <i class="fas fa-users"></i> Ver Candidatos
                    </a>
                    <a href="{% url 'editar_vaga' vaga.id %}" class="btn-small btn-edit">Editar</a>
                    <a href="{% url 'deletar_vaga' vaga.id %}" class="btn-small btn-delete">Excluir</a>
                </div>
            </div>
        {% empty %}
            <div class="empty-state">
                <i class="fas fa-folder-open" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i>
                <p>Você ainda não publicou nenhuma vaga.</p>
                <a href="{% url 'criar_vaga' %}" style="color: #BEF264; font-weight: bold;">Criar a primeira agora</a>
            </div>
        {% endfor %}
    </div>

</div>
{% endblock %}